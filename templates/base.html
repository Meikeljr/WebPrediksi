<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Aplikasi Prediksi Regresi{% endblock %}</title>

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Datatables -->
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css"
    />

    <!-- Custom CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />

    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
  </head>

  <body>
    <!-- =====================================
         SIDEBAR NAVIGATION (BARU & MODERN)
    ====================================== -->
    <nav
      class="sidebar d-flex flex-column flex-shrink-0 p-3 bg-white"
      id="sidebar"
    >
      {% if current_user.is_authenticated %}

      <a
        href="javascript:void(0)"
        id="toggleNav"
        class="d-flex align-items-center mb-4 text-decoration-none sidebar-toggle"
      >
        <img
          src="{{ url_for('static', filename='img/logo.png') }}"
          alt="Logo"
          class="rounded-circle me-2"
          width="40"
          height="40"
        />
        <span class="fs-5 fw-bold sidebar-text">Nursila Bakery</span>
      </a>

      <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item">
          <a href="{{ url_for('beranda') }}" class="nav-link sidebar-link">
            <i data-feather="home" class="me-2 icon"></i>
            <span class="sidebar-text">Beranda</span>
          </a>
        </li>

        <li>
          <a
            href="{{ url_for('data_penjualan') }}"
            class="nav-link sidebar-link"
          >
            <i data-feather="database" class="me-2 icon"></i>
            <span class="sidebar-text">Data Penjualan</span>
          </a>
        </li>

        <li>
          <a href="{{ url_for('prediksi') }}" class="nav-link sidebar-link">
            <i data-feather="activity" class="me-2 icon"></i>
            <span class="sidebar-text">Prediksi</span>
          </a>
        </li>

        <li>
          <a href="{{ url_for('pencatatan') }}" class="nav-link sidebar-link">
            <i data-feather="edit-2" class="me-2 icon"></i>
            <span class="sidebar-text">Pencatatan</span>
          </a>
        </li>
      </ul>

      <hr />

      <div class="sidebar-link d-flex align-items-center mb-2">
        <i data-feather="user" class="me-2 icon"></i>
        <span class="sidebar-text">Halo, {{ current_user.name }}</span>
      </div>

      <a
        href="{{ url_for('logout') }}"
        class="nav-link sidebar-link text-danger mt-3"
      >
        <i data-feather="log-out" class="me-2 icon"></i>
        <span class="sidebar-text">Log Out</span>
      </a>

      {% else %}
      <a href="{{ url_for('login') }}" class="nav-link sidebar-link mt-auto">
        <i data-feather="user" class="me-2 icon"></i>
        <span class="sidebar-text">Login</span>
      </a>
      {% endif %}
    </nav>

    <!-- =====================================
          CONTENT WRAPPER
    ====================================== -->
    <div class="content-wrapper bg-light">
      <div class="container-fluid">
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %}
        <div class="row pt-3">
          <div class="col">
            {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
          </div>
        </div>
        {% endif %} {% endwith %}

        <main class="py-3">{% block content %}{% endblock %}</main>
      </div>

      <footer class="footer mt-auto py-3 text-center">
        <p class="mb-0">&copy; 2025 Aplikasi Regresi Linier Berganda</p>
      </footer>
    </div>

    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Datatables -->
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>

    <script>
      $(document).ready(function () {
        if ($("#dataTable").length) {
          $("#dataTable").DataTable({
            language: {
              url: "//cdn.datatables.net/plug-ins/1.11.5/i18n/id.json",
            },
          });
        }
      });
    </script>

    <!-- Sidebar Script -->
    <script>
      document
        .getElementById("toggleNav")
        .addEventListener("click", function () {
          document.getElementById("sidebar").classList.toggle("expanded");
          document
            .querySelector(".content-wrapper")
            .classList.toggle("expanded");
        });

      feather.replace();
    </script>

    {% block scripts %}{% endblock %}
  </body>
</html>
